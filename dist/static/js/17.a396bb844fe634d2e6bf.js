webpackJsonp([17],{"7ztX":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={name:"Login",data:function(){return{mobile:"",code:"",password:"",errorMsg:"",times:"获取验证码",timer:null,onOff:null,toastTip:!1}},computed:{text:function(){return this.times>0?this.times+"s":"获取验证码"}},methods:{countDown:function(){this.validMobile()&&(this.sendCode(),console.log(222),this.onOff&&(this.onOff=!1))},validMobile:function(){return""!=this.mobile&&11==this.mobile.length||(this.tipShow("请输入正确的手机号"),!1)},validCode:function(){return!(""==this.code||this.code.length<6)||(this.tipShow("验证码有误，请重新输入"),!1)},validPassword:function(){return!(""==this.password||!/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/.test(this.password))||(this.tipShow("密码为 6-16 位数字和字母组合"),!1)},tipShow:function(t){this.errorMsg=t,this.toastTip=!0;var s=this;setTimeout(function(){return s.toastTip=!1,!1},1e3)},sendCode:function(){var t=this;this.onOff=!0,console.log(1);var s=this;this.$http.post(this.baseurl+"/sms/resetpassword/code",{mobile:this.mobile}).then(function(e){console.log(e),s.onOff=!0;clearInterval(t.timer),t.times=60;var o=t;t.timer=setInterval(function(){o.times--,console.log(33333),o.times<=0&&(clearInterval(o.timer),o.timer=null,o.times="获取验证码",o.onOff=!0)},2e3)}).catch(function(s){console.log(s),s.response&&(console.log(s.response.data.message),t.tipShow(s.response.data.message),t.onOff=!1)})},findPwd:function(){var t=this;this.validMobile()&&this.validCode()&&this.validPassword()&&this.$http.post(this.baseurl+"/password/reset",{mobile:this.mobile,code:this.code,password:this.password}).then(function(s){console.log(s),t.$router.push("/login")}).catch(function(s){console.log(s),s.response&&(console.log(s.response.data.message),t.tipShow(s.response.data.message),_this.onOff=!1)})}}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.toastTip,expression:"toastTip"}],staticClass:"toast-tip"},[t._v("\n    "+t._s(t.errorMsg)+"\n  ")]),t._v(" "),e("div",{staticClass:"header line-bottom"},[e("span",{staticClass:"icon-back",on:{click:function(s){t.$router.go(-1)}}}),t._v("\n    忘记密码\n  ")]),t._v(" "),e("div",{staticClass:"form-frame"},[e("div",{staticClass:"from-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],staticClass:"input1 tel1",attrs:{type:"tel",placeholder:"手机号"},domProps:{value:t.mobile},on:{input:function(s){s.target.composing||(t.mobile=s.target.value)}}}),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"from-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"input1 password1",attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.code},on:{input:function(s){s.target.composing||(t.code=s.target.value)}}}),t._v(" "),t._m(1),t._v(" "),e("span",{staticClass:"getcode",on:{click:t.countDown}},[t._v(t._s(t.text))])]),t._v(" "),e("div",{staticClass:"from-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input1 tel1",attrs:{type:"password",placeholder:"新密码（至少6位）"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}}),t._v(" "),t._m(2)]),t._v(" "),e("div",{staticClass:"btnRegister",on:{click:t.findPwd}},[t._v("提交")])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon-tel iconImg"},[s("img",{attrs:{src:"/static/images/home/icon/icon_phone@3x.png"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon-code iconImg"},[s("img",{attrs:{src:"/static/images/home/icon/icon_acthcode@3x.png"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"icon-tel iconImg"},[s("img",{attrs:{src:"/static/images/home/icon/icon_lockclose@3x.png"}})])}]};var n=e("VU/8")(o,i,!1,function(t){e("upxr")},"data-v-a5075ce0",null);s.default=n.exports},upxr:function(t,s){}});
//# sourceMappingURL=17.a396bb844fe634d2e6bf.js.map